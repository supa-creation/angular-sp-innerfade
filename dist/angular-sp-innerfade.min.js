!function(root,factory){"undefined"!=typeof module&&module.exports?module.exports=factory(require("angular")):"function"==typeof define&&define.amd?define(["angular"],factory):factory(root.angular)}(this,function(angular){"use strict";var module=angular.module("spInnerfade",[]);return module.controller("spInnerfade",["$scope","$element","$timeout","$window",function($scope,$element,$timeout,$window){$scope.items=$element[0].querySelectorAll(".sp-innerfade-item"),$scope.next=function(){this.currentIndex<this.items.length-1?this.currentIndex++:this.currentIndex=0},$scope.updateHeight=function(){$element.css({height:$scope.items[this.currentIndex].offsetHeight+"px"})},$scope.$watch("currentIndex",function(){$scope.updateHeight()}),angular.element($window).bind("resize",function(){$scope.updateHeight()}),$scope.play=function(){$timeout(function(){$scope.next(),$scope.play()},5e3)},$scope.currentIndex=0,$scope.play()}]),module.directive("spInnerfadeItem",["$window","$timeout",function($window,$timeout){return{restrict:"AC",replace:!0,transclude:!0,scope:!0,template:'<div ng-show="currentIndex == index" ng-transclude></div>',link:function($scope,$element){$timeout(function(){$scope.index=Array.prototype.indexOf.call($scope.items,$element[0]),$element.find("img").bind("load",function(){$scope.updateHeight()})})}}}]),module});